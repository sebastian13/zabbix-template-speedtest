<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>7.0</version>
    <template_groups>
        <template_group>
            <uuid>7df96b18c230490a9a0a9e2307226338</uuid>
            <name>Templates</name>
        </template_group>
    </template_groups>
    <templates>
        <template>
            <uuid>9c307180079643a8a7f3158cd0f53092</uuid>
            <template>Speedtest</template>
            <name>Speedtest®: Monitor Internet Bandwith</name>
            <description>Monitoring internet bandwidth using speedtest and zabbix. This template requires the local script from https://github.com/sebastian13/zabbix-template-speedtest.

It uses `zabbix_sender` to send the values to a Zabbix Server. The interval is set via cron. By default, it uses the server selected by Ookla's speedtest cli. In addition, you can provide a City or a specific Sever-ID.</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>7ffcdd063fa04db7811959ced66decb9</uuid>
                    <name>Bandwidth Download</name>
                    <type>TRAP</type>
                    <key>speedtest.download</key>
                    <delay>0</delay>
                    <history>90d</history>
                    <value_type>FLOAT</value_type>
                    <units>bps</units>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>355112c82e5c4c63b975991dbdc5a552</uuid>
                    <name>Packet Loss</name>
                    <type>TRAP</type>
                    <key>speedtest.packetloss</key>
                    <delay>0</delay>
                    <history>90d</history>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>f74bb9c80be34db989c9458fadb46594</uuid>
                            <expression>last(/Speedtest/speedtest.packetloss)&gt;0</expression>
                            <name>Packet loss detected: {ITEM.LASTVALUE} %</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>c7efe911a26c4b67ba68d71b71c3a6e3</uuid>
                    <name>Ping</name>
                    <type>TRAP</type>
                    <key>speedtest.ping</key>
                    <delay>0</delay>
                    <history>90d</history>
                    <value_type>FLOAT</value_type>
                    <units>ms</units>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>bdad1420eec04d04b9860146d80d6eda</uuid>
                    <name>Server Location</name>
                    <type>TRAP</type>
                    <key>speedtest.srv.city</key>
                    <delay>0</delay>
                    <history>14d</history>
                    <value_type>TEXT</value_type>
                    <trends>0</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>fdc97cbd42464b6fbdceaa8b9e93060a</uuid>
                    <name>Server Country</name>
                    <type>TRAP</type>
                    <key>speedtest.srv.country</key>
                    <delay>0</delay>
                    <history>14d</history>
                    <value_type>TEXT</value_type>
                    <trends>0</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>78b5968c9f044af2b4eb7fab33e7b0af</uuid>
                    <name>Server ID</name>
                    <type>TRAP</type>
                    <key>speedtest.srv.id</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>TEXT</value_type>
                    <trends>0</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>6a8add61ca5b49c9a9932acd4b984c0a</uuid>
                    <name>Server Name</name>
                    <type>TRAP</type>
                    <key>speedtest.srv.name</key>
                    <delay>0</delay>
                    <history>14d</history>
                    <value_type>TEXT</value_type>
                    <trends>0</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>182306630a6f48f8aee0e5525cbc1f00</uuid>
                    <name>Bandwidth Upload</name>
                    <type>TRAP</type>
                    <key>speedtest.upload</key>
                    <delay>0</delay>
                    <history>90d</history>
                    <value_type>FLOAT</value_type>
                    <units>bps</units>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e54080aa3df94574a564b77062a555c4</uuid>
                    <name>WAN IP</name>
                    <type>TRAP</type>
                    <key>speedtest.wan.ip</key>
                    <delay>0</delay>
                    <history>90d</history>
                    <value_type>TEXT</value_type>
                    <trends>0</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>51b7ff663e44403ebfd4221292e227df</uuid>
                            <expression>change(/Speedtest/speedtest.wan.ip)=1</expression>
                            <name>External IP has changed: {ITEM.PREVVALUE} → {ITEM.VALUE}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>b3a8d15dd0fd4136a6057a857d8c5a41</uuid>
                    <name>WAN ISP</name>
                    <type>TRAP</type>
                    <key>speedtest.wan.isp</key>
                    <delay>0</delay>
                    <history>14d</history>
                    <value_type>TEXT</value_type>
                    <trends>0</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Speedtest</value>
                        </tag>
                    </tags>
                </item>
            </items>
        </template>
    </templates>
    <graphs>
        <graph>
            <uuid>b1ba1ae2f6174e369000e275d4db9f23</uuid>
            <name>Speedtest ® Upload vs Download Bandwidth</name>
            <show_work_period>NO</show_work_period>
            <show_triggers>NO</show_triggers>
            <graph_items>
                <graph_item>
                    <drawtype>BOLD_LINE</drawtype>
                    <color>1A7C11</color>
                    <calc_fnc>MAX</calc_fnc>
                    <item>
                        <host>Speedtest</host>
                        <key>speedtest.download</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <drawtype>BOLD_LINE</drawtype>
                    <color>000066</color>
                    <calc_fnc>MAX</calc_fnc>
                    <item>
                        <host>Speedtest</host>
                        <key>speedtest.upload</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
</zabbix_export>
